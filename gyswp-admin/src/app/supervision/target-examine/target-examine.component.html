<page-header [title]=""></page-header>
<nz-card>
    <div nz-row>
        <form nz-form (ngSubmit)="refreshData()" [nzLayout]="'inline'">
            <div nz-row [nzGutter]="18">
                <div nz-col [nzSpan]="8" class="mb-md">
                    <nz-form-item class="d-flex" style="margin-bottom: 0px;">
                        <nz-form-label nzFor="category">检查周期</nz-form-label>
                        <nz-form-control class="flex-1">
                            <nz-select style="width: 100%;" name="cycleTime" [(ngModel)]="search.cycleTime">
                                <nz-option *ngFor="let i of cycleTimes" [nzLabel]="i.text" [nzValue]="i.value">
                                </nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <!-- <div nz-col [nzSpan]="8" class="mb-md">
                    <nz-form-item class="d-flex" style="margin-bottom: 0px;">
                        <nz-form-label nzFor="keyWord">标准名称/编号</nz-form-label>
                        <nz-form-control class="flex-1">
                            <input nz-input name="keyWord" [(ngModel)]="search.keyWord" [placeholder]="'请输入标准名称/编号'">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8" class="mb-md">
                    <nz-form-item class="d-flex" style="margin-bottom: 0px;">
                        <nz-form-label nzFor="category">周期</nz-form-label>
                        <nz-form-control class="flex-1">
                            <nz-select style="width: 100%;" name="category" [(ngModel)]="search.categoryId">
                                <nz-option *ngFor="let i of categories" [nzLabel]="i.text" [nzValue]="i.value">
                                </nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div> -->
                <div nz-col [nzSpan]="12" class="mb-md right" [class.text-right]="'true'" style="float: right;">
                    <nz-form-item class="d-flex" style="margin-right: 0px;margin-bottom: 0px;">
                        <nz-form-control class="flex-1">
                            <button nz-button type="button" (click)="refreshData()" nzType="primary"
                                [nzLoading]="isTableLoading">查询</button>
                            <button nz-button type="button" (click)="reset()" class="mx-sm">重置</button>
                            <button nz-button type="button" (click)="publish()" [nzLoading]="saving">
                                <i nz-icon type="audit"></i>
                                <span>批量发布</span>
                            </button>
                            <button nz-button type="button" (click)="create()">
                                <i nz-icon type="plus"></i>
                                <span>创建指标</span>
                            </button>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>
        </form>
        <ng-template #totalTemplate let-total>共 {{totalItems}} 条</ng-template>
        <nz-table #nzTable [nzFrontPagination]="false" [nzShowTotal]="totalTemplate" [nzTotal]="totalItems"
            [nzData]="dataList" [(nzPageIndex)]="pageNumber" [(nzPageSize)]="pageSize" [nzLoading]="isTableLoading"
            [nzShowSizeChanger]="true" (nzPageIndexChange)="refresh()" (nzPageSizeChange)="refresh()">
            <thead>
                <tr>

                    <th style="text-align: right;">
                    </th>
                    <th>检查指标</th>
                    <th>指标释义</th>
                    <th>测量方式</th>
                    <th>周期</th>
                    <th>预期值</th>
                    <th>指标来源</th>
                    <th>状态</th>
                    <!-- <th>截止日期</th> -->
                    <!-- <th>实际值</th> -->
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of nzTable.data">
                    <td style="text-align: right;">
                        <label nz-checkbox [(ngModel)]="item.checked">
                        </label>
                    </td>
                    <td>{{item.title}}</td>
                    <td title="{{item.paraphrase}}">{{item.paraphrase | lengthLimit:10}}</td>
                    <td title="{{item.measuringWay}}">{{item.measuringWay | lengthLimit:10}}</td>
                    <td>{{item.cycleTimeName}}</td>
                    <!-- <nz-badge *ngIf="item.statusName == 1" [nzStatus]="'default'" [nzText]="'未填写'"></nz-badge>
                    <nz-badge *ngIf="item.statusName == 2" [nzStatus]="'success'" [nzText]="'已达成'"></nz-badge>
                    <nz-badge *ngIf="item.statusName == 3" [nzStatus]="'error'" [nzText]="'未达成'"></nz-badge> -->
                    <td>{{item.achieveTypeName + item.expectedValue}}</td>
                    <td>{{item.sourceDocName}}</td>
                    <td>
                        <nz-badge *ngIf="item.isAction" [nzStatus]="'success'" [nzText]="'已启用'"></nz-badge>
                        <nz-badge *ngIf="!item.isAction" [nzStatus]="'error'" [nzText]="'已废止'"></nz-badge>
                    </td>
                    <!-- <td>{{item.endTime | date: "yyyy-MM-dd"}}</td> -->
                    <!-- <td>{{item.actualValue}}</td> -->
                    <td>
                        <a (click)="goDetail(item.id)">详情</a>
                        <nz-divider nzType="vertical"></nz-divider>
                        <a (click)="goRecord(item.id)">检查记录</a>
                        <nz-divider nzType="vertical"></nz-divider>
                        <a (click)="publishById(item.id)">发布</a>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
</nz-card>